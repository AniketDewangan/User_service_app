{"openapi":"3.1.0","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"tags":[{"name":"Health","description":"Health check endpoint"},{"name":"Profiles","description":"Endpoints for profile management"}],"paths":{"/api/profiles/{id}":{"get":{"tags":["Profiles"],"summary":"Get profile by ID","description":"Retrieves profile information by ID","operationId":"getProfileById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Profile found","content":{"*/*":{"schema":{"type":"object"}}}},"404":{"description":"Profile not found","content":{"*/*":{"schema":{"type":"object"}}}}}},"put":{"tags":["Profiles"],"summary":"Update profile","description":"Updates an existing profile and tracks history","operationId":"updateProfile","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProfileRequest"}}},"required":true},"responses":{"200":{"description":"Profile updated successfully","content":{"*/*":{"schema":{"type":"object"}}}},"404":{"description":"Profile not found","content":{"*/*":{"schema":{"type":"object"}}}}}},"delete":{"tags":["Profiles"],"summary":"Delete profile","description":"Deletes a profile","operationId":"deleteProfile","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Profile deleted successfully","content":{"*/*":{"schema":{"type":"object"}}}},"404":{"description":"Profile not found","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/profiles":{"get":{"tags":["Profiles"],"summary":"Get all profiles","description":"Retrieves all profiles","operationId":"getAllProfiles","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ProfileResponse"}}}}}}},"post":{"tags":["Profiles"],"summary":"Create a new profile","description":"Creates a new profile","operationId":"createProfile","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProfileRequest"}}},"required":true},"responses":{"201":{"description":"Profile created successfully","content":{"*/*":{"schema":{"type":"object"}}}},"400":{"description":"Email already exists","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/profiles/{id}/verify-password":{"post":{"tags":["Profiles"],"summary":"Verify password","description":"Verifies if the provided password matches the stored hash","operationId":"verifyPassword","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordVerificationRequest"}}},"required":true},"responses":{"200":{"description":"Password verification result","content":{"*/*":{"schema":{"type":"object"}}}},"404":{"description":"Profile not found","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/profiles/login":{"post":{"tags":["Profiles"],"summary":"Login","description":"Authenticates a user by email and password","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Login successful","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"401":{"description":"Invalid credentials","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"404":{"description":"Email not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}}}}},"/api/profiles/{id}/update-count":{"get":{"tags":["Profiles"],"summary":"Get profile update count","description":"Retrieves the number of updates for a profile","operationId":"getUpdateCount","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Update count retrieved","content":{"*/*":{"schema":{"type":"object"}}}},"404":{"description":"Profile not found","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/profiles/{id}/history":{"get":{"tags":["Profiles"],"summary":"Get profile update history","description":"Retrieves the update history for a profile","operationId":"getProfileHistory","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"History retrieved successfully","content":{"*/*":{"schema":{"type":"object"}}}},"404":{"description":"Profile not found","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/profiles/test":{"get":{"tags":["Profiles"],"summary":"Test endpoint","description":"Simple test endpoint","operationId":"test","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/profiles/email/{email}":{"get":{"tags":["Profiles"],"summary":"Get profile by email","description":"Retrieves profile information by email","operationId":"getProfileByEmail","parameters":[{"name":"email","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Profile found","content":{"*/*":{"schema":{"type":"object"}}}},"404":{"description":"Profile not found","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/health":{"get":{"tags":["Health"],"summary":"Check service health","description":"Returns the health status of the service","operationId":"health","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}}}}}},"components":{"schemas":{"ProfileRequest":{"type":"object","properties":{"name":{"type":"string"},"email":{"type":"string"},"dob":{"type":"string"},"sex":{"type":"string"},"password":{"type":"string"},"phones":{"type":"array","items":{"type":"string"}},"addresses":{"type":"array","items":{"type":"string"}}},"required":["dob","email","name","password","sex"]},"PasswordVerificationRequest":{"type":"object","properties":{"password":{"type":"string"}}},"LoginRequest":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"}}},"LoginResponse":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"profileId":{"type":"integer","format":"int64"},"name":{"type":"string"},"email":{"type":"string"}}},"ProfileResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"email":{"type":"string"},"dob":{"type":"string"},"age":{"type":"integer","format":"int32"},"sex":{"type":"string"},"password":{"type":"string"},"phones":{"type":"array","items":{"type":"string"}},"addresses":{"type":"array","items":{"type":"string"}}}}}}}